if(window.$&&window.$.Velocity)window.Velocity=window.$.Velocity;HTMLElement.prototype.wrap=function(e){this.parentNode.insertBefore(e,this);this.parentNode.removeChild(this);e.appendChild(this)};var scrollAction={x:"undefined",y:"undefined"},scrollDirection;const Container=document.querySelector("body > .container");const siteNav=document.querySelector(".container > header nav");const siteNavHeight=siteNav.getBoundingClientRect().height;const headerHight=document.querySelector(".container > header").getBoundingClientRect().height-siteNavHeight;const backToTop=document.querySelector(".back-to-top");const resizeHandle=function(e){var t=115;if(document.querySelector(".sidebar .tab").innerHTML==""){t=37}document.querySelector(".sidebar .panels").style.height=document.body.offsetHeight-t+"px"};const scrollHandle=function(e){var t=window.innerHeight;var n=document.querySelector(".content > .wrap").offsetHeight;var o=n>t?n-t:document.body.scrollHeight-t;siteNav.classList.toggle("show",Container.scrollTop>headerHight);document.querySelector("main .sidebar").classList.toggle("affix",Container.scrollTop>headerHight&&document.body.offsetWidth>991);if(typeof scrollAction.x=="undefined"){scrollAction.x=Container.scrollLeft;scrollAction.y=Container.scrollTop}var r=scrollAction.x-Container.scrollLeft;var c=scrollAction.y-Container.scrollTop;if(r<0){scrollDirection="right"}else if(r>0){scrollDirection="left"}else if(c<0){scrollDirection="down";siteNav.classList.remove("up");siteNav.classList.toggle("down",Container.scrollTop>headerHight)}else if(c>0){scrollDirection="up";siteNav.classList.remove("down");siteNav.classList.toggle("up",Container.scrollTop>headerHight)}else{}scrollAction.x=Container.scrollLeft;scrollAction.y=Container.scrollTop;var i=Math.round(Math.min(100*Container.scrollTop/o,100))+"%";backToTop.querySelector("span").innerText=i;document.querySelector(".quick .percent").style.width=i};const sidebarTOC=function(){var e=document.querySelectorAll(".contents li");var t=Array.prototype.slice.call(e)||[];t=t.map(function(e){var t=e.querySelector("a.toc-link");t.addEventListener("click",function(e){e.preventDefault();var t=document.getElementById(e.currentTarget.getAttribute("href").replace("#",""));Velocity(t,"scroll",{duration:500,container:Container,offset:-siteNavHeight})});return document.getElementById(t.getAttribute("href").replace("#",""))});var n=document.querySelector(".contents.panel");function o(o){var r=e[o];if(!r)return;if(r.classList.contains("current")){return}document.querySelectorAll(".toc .active").forEach(function(e){e.classList.remove("active","current")});t.forEach(function(e){e.classList.remove("active")});r.classList.add("active","current");t[o].classList.add("active");var c=r.parentNode;while(!c.matches(".contents")){if(c.matches("li")){c.classList.add("active");document.getElementById(c.querySelector("a.toc-link").getAttribute("href").replace("#","")).classList.add("active")}c=c.parentNode}Velocity(r,"scroll",{duration:200,container:n})}function r(e){var n=0;var o=e[n];if(o.boundingClientRect.top>0){n=t.indexOf(o.target);return n===0?0:n-1}for(;n<e.length;n++){if(e[n].boundingClientRect.top<=0){o=e[n]}else{return t.indexOf(o.target)}}return t.indexOf(o.target)}function c(e){e=Math.floor(e+1e4);var n=new IntersectionObserver(function(t,n){var i=Container.scrollHeight+siteNavHeight;if(i>e){n.disconnect();c(i);return}var a=r(t)+1;o(a)},{root:Container,rootMargin:e+"px 0px -100% 0px",threshold:0});t.forEach(function(e){e&&n.observe(e)})}c(Container.scrollHeight)};const sideBarToggleHandle=function(e){const t=document.querySelector("main .sidebar");document.querySelector(".toggle.menu").classList.toggle("close");var n=t.classList.contains("on")?"transition.slideRightOut":"transition.slideRightIn";Velocity(t,n,{duration:200,complete:function(){t.classList.toggle("on")}})};const sideBarTab=function(){document.querySelector(".dimmer").addEventListener("click",sideBarToggleHandle);document.querySelector(".quick .up").addEventListener("click",backToTopHandle);document.querySelector(".quick .down").addEventListener("click",goToBottomHandle);document.querySelectorAll(".sidebar .tab li").forEach(function(e){e.addEventListener("click",function(e){var t=event.currentTarget;if(t.classList.contains("active"))return;document.querySelectorAll(".sidebar .tab li").forEach(function(e){e.classList.remove("active")});document.querySelectorAll(".sidebar .panel").forEach(function(e){e.classList.remove("active")});document.querySelector(".sidebar .panel."+t.className).classList.add("active");t.classList.add("active")})})};const postBeauty=function(){document.querySelectorAll("figure.highlight").forEach(function(e){const t=e.querySelector("figcaption");if(t){t.insertAdjacentHTML("afterBegin",'<div class="carbon"><div class="dot red"></div><div class="dot yellow"></div><div class="dot green"></div></div>')}const n=document.createElement("div");e.wrap(n);n.classList.add("highlight-container");n.insertAdjacentHTML("beforeend",'<div class="copy-btn"><i class="fa fa-clipboard fa-fw"></i></div>');var o=e.parentNode.querySelector(".copy-btn");o.addEventListener("click",function(e){var t=e.currentTarget;var n=Array.prototype.slice.call(t.parentNode.querySelectorAll(".code .line"))||[];n=n.map(function(e){return e.innerText}).join("\n");var o=document.createElement("textarea");o.style.top=window.scrollY+"px";o.style.position="absolute";o.style.opacity="0";o.readOnly=true;o.value=n;document.body.append(o);const r=document.getSelection();const c=r.rangeCount>0?r.getRangeAt(0):false;o.select();o.setSelectionRange(0,n.length);o.readOnly=false;var i=document.execCommand("copy");t.querySelector("i").className=i?"fa fa-check fa-fw":"fa fa-times fa-fw";o.blur();t.blur();if(c){r.removeAllRanges();r.addRange(c)}document.body.removeChild(o)});o.addEventListener("mouseleave",function(e){setTimeout(function(){e.target.querySelector("i").className="fa fa-clipboard fa-fw"},300)})});document.querySelectorAll("table").forEach(function(e){const t=document.createElement("div");t.className="table-container";e.wrap(t)})};const backToTopHandle=function(){Velocity(document.querySelector("main"),"scroll",{duration:500,container:Container,offset:0})};const goToBottomHandle=function(){Velocity(document.querySelector("main"),"scroll",{duration:500,container:Container,offset:document.querySelector(".content > .wrap").offsetHeight})};const siteRefresh=function(){resizeHandle();postBeauty();sidebarTOC();sideBarTab()};const siteInit=function(){var e=new Pjax({selectors:["head title","main > .inner",".post-toc-wrap",".languages","#pjax"],switches:{".post-toc-wrap":Pjax.switches.innerHTML},analytics:false,cacheBust:false});document.querySelector(".toggle.menu").addEventListener("click",sideBarToggleHandle);Container.addEventListener("scroll",scrollHandle);backToTop.addEventListener("click",backToTopHandle);window.addEventListener("resize",resizeHandle);window.addEventListener("pjax:send",function(){});window.addEventListener("pjax:success",function(){backToTopHandle();siteRefresh();document.querySelector(".toggle.menu").classList.remove("close")});siteRefresh()};window.addEventListener("DOMContentLoaded",siteInit);